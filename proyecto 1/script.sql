CREATE TABLE Clientes (
    IDCliente NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDNacional VARCHAR2(20) UNIQUE NOT NULL,
    nombre VARCHAR2(40) NOT NULL,
    apellido VARCHAR2(40) NOT NULL,
    correo VARCHAR2(320) NOT NULL,
    telefono VARCHAR2(15) NOT NULL,
    estado VARCHAR2(1) CHECK (estado IN ('1', '0')) NOT NULL,
    fechaDeRegistro TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    correoConfirmacion VARCHAR2(1) CHECK (correoConfirmacion IN ('1', '0')) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);

CREATE TABLE Trabajadores (
    IDTrabajador NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDNacional VARCHAR2(20) UNIQUE NOT NULL,
    nombre VARCHAR2(40) NOT NULL,
    apellido VARCHAR2(40) NOT NULL,
    cargo VARCHAR2(50) NOT NULL,
    IDDepartamento NUMBER NOT NULL,
    telefono VARCHAR2(15) NOT NULL,
    correoInstitucional VARCHAR2(320) NOT NULL,
    IDSede NUMBER NOT NULL,
    estado VARCHAR2(1) CHECK (estado IN ('1', '0')) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT TrabajadoresDepartamentoFK FOREIGN KEY (IDDepartamento) REFERENCES Departamentos(IDDepartamento),
    CONSTRAINT TrabajadoresSedeFK FOREIGN KEY (IDSede) REFERENCES Sedes(IDSede)
);

CREATE TABLE Productos (
    IDProducto NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    sku VARCHAR2(20) NOT NULL,
    nombre VARCHAR2(50) NOT NULL,
    descripcion VARCHAR2(255) NOT NULL,
    precio NUMBER(10,2) DEFAULT 0,
    slug VARCHAR2(255) NOT NULL,
    IDCategoria NUMBER NOT NULL,
    disponibilidad VARCHAR2(1) CHECK (disponibilidad IN ('1', '0')) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT ProductosCategoriasFK FOREIGN KEY (IDCategoria) REFERENCES Categorias(IDCategoria),
    CONSTRAINT ProductosInventarioFK FOREIGN KEY (InventarioIDInventario) REFERENCES Inventario(IDInventario),
    CONSTRAINT ProductosDetallesCompraFK FOREIGN KEY (DetallesComIDDetalleCom) REFERENCES DetallesCompra(IDDetalleCom),
    CONSTRAINT ProductosDevolucionesFK FOREIGN KEY (DevolucionesIDDevolucion) REFERENCES Devoluciones(IDDevolucion),
    CONSTRAINT ProductosDetallesTrasladosFK FOREIGN KEY (DetallesTrasIDDetalleTras) REFERENCES DetallesTraslados(IDDetalleTras)

);

CREATE TABLE OrdenesDeCompra (
    IDOrdenDeCompra NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    fechaDeCreacion TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    IDCliente NUMBER NOT NULL,
    montoTotal NUMBER(10,2) DEFAULT 0,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT OrdenesDeCompraClientesFK FOREIGN KEY (IDCliente) REFERENCES Clientes(IDCliente)
);

CREATE TABLE Pagos (
    IDPago NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDOrdenDeCompra NUMBER NOT NULL,
    fechaDeTransaccion TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    montoTotal NUMBER(10,2) DEFAULT 0,
    IDTipoPago NUMBER NOT NULL,
    estadoDelPago VARCHAR2(10) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT PagosOrdenesDeCompraFK FOREIGN KEY (IDOrdenDeCompra) REFERENCES OrdenesDeCompra(IDOrdenDeCompra),
    CONSTRAINT PagosTipoDePagoFK FOREIGN KEY (IDTipoPago) REFERENCES TipoDePago(IDTipoPago)
);

CREATE TABLE Envios (
    IDEnvio NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    fechaDeDespacho TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    IDOrdenDeCompra NUMBER NOT NULL,
    IDDireccion NUMBER NOT NULL,
    IDEmpresa NUMBER NOT NULL,
    numeroDeSeguimiento VARCHAR2(50) NOT NULL,
    estadoDelEnvio VARCHAR2(12) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT EnviosOrdenesDeCompraFK FOREIGN KEY (IDOrdenDeCompra) REFERENCES OrdenesDeCompra(IDOrdenDeCompra),
    CONSTRAINT EnviosDireccionesFK FOREIGN KEY (IDDireccion) REFERENCES Direcciones(IDDireccion),
    CONSTRAINT EnviosEmpresasDeTransporteFK FOREIGN KEY (IDEmpresa) REFERENCES EmpresasDeTransporte(IDEmpresa)
);

CREATE TABLE Devoluciones (
    IDDevolucion NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDOrdenDeCompra NUMBER NOT NULL,
    fechaDeSolicitud TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    motivo VARCHAR2(255) NOT NULL,
    IDProducto NUMBER NOT NULL,
    estadoDelProceso VARCHAR2(12) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT FKDevolOrden FOREIGN KEY (IDOrdenDeCompra) REFERENCES OrdenesDeCompra(IDOrdenDeCompra),
    CONSTRAINT FKDevolProducto FOREIGN KEY (IDProducto) REFERENCES Productos(IDProducto)
);

CREATE TABLE Traslados (
    IDTraslado NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    fechaDeMovimiento TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    IDAlmacenDeOrigen NUMBER NOT NULL,
    IDAlmacenDeDestino NUMBER NOT NULL,
    estadoTraslado VARCHAR2(15) NOT NULL,
    fechaEstimadaDeLlegada TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT TrasladosAlmacenesOrigenFK FOREIGN KEY (IDAlmacenDeOrigen) REFERENCES Almacenes(IDAlmacen),
    CONSTRAINT TrasladosAlmacenesDestinoFK FOREIGN KEY (IDAlmacenDeDestino) REFERENCES Almacenes(IDAlmacen)
);

CREATE TABLE Direcciones (
    IDDireccion NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDCliente NUMBER NOT NULL,
    direccion VARCHAR2(200) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT DireccionesClientesFK FOREIGN KEY (IDCliente) REFERENCES Clientes(IDCliente)
);

CREATE TABLE MetodosDePagoClientes (
    IDMetodoPago NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDCliente NUMBER NOT NULL,
    metodoDePago VARCHAR2(50) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT FKMetPagoCliente FOREIGN KEY (IDCliente) REFERENCES Clientes(IDCliente)
);

CREATE TABLE Departamento (
    IDDepartamento NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nombre VARCHAR2(50) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);

CREATE TABLE Sedes (
    IDSede NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nombre VARCHAR2(50) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);

CREATE TABLE Categorias (
    IDCategoria NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    categoria VARCHAR2(40) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);

CREATE TABLE Inventario (
    IDInventario NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDSede NUMBER NOT NULL,
    IDProducto NUMBER NOT NULL,
    cantidad NUMBER NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT InventarioSedeFK FOREIGN KEY (IDSede) REFERENCES Sedes(IDSede),
    CONSTRAINT InventarioProductoFK FOREIGN KEY (IDProducto) REFERENCES Productos(IDProducto)
);

CREATE TABLE DetallesDeCompra (
    IDDetalleCompra NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDOrdenDeCompra NUMBER NOT NULL,
    IDProducto NUMBER NOT NULL,
    cantidad NUMBER NOT NULL,
    precioUnitario NUMBER(10,2) DEFAULT 0,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT DetallesOrdenesFK FOREIGN KEY (IDOrdenDeCompra) REFERENCES OrdenesDeCompra(IDOrdenDeCompra),
    CONSTRAINT DetallesProductosFK FOREIGN KEY (IDProducto) REFERENCES Productos(IDProducto)
);

CREATE TABLE DetallesTraslados (
    IDDetalleTraslado NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDTraslado NUMBER NOT NULL,
    IDProducto NUMBER NOT NULL,
    cantidadTransferida NUMBER NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT DetallesTrasladosTrasladosFK FOREIGN KEY (IDTraslado) REFERENCES Traslados(IDTraslado),
    CONSTRAINT DetallesTrasladosProductosFK FOREIGN KEY (IDProducto) REFERENCES Productos(IDProducto)
);

CREATE TABLE Imagenes (
    IDImagen NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    IDProducto NUMBER NOT NULL,
    urlImagen VARCHAR2(255) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    CONSTRAINT ImagenesProductosFK FOREIGN KEY (IDProducto) REFERENCES Productos(IDProducto)
);

CREATE TABLE TiposDePago (
    IDTipoPago NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    tipoDePago VARCHAR2(50) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);

CREATE TABLE EmpresasDeTransporte (
    IDEmpresa NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    nombreEmpresa VARCHAR2(60) UNIQUE NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);

CREATE TABLE Almacenes (
    IDAlmacen NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    Almacen VARCHAR2(60) NOT NULL,
    createdAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL,
    updatedAt TIMESTAMP DEFAULT SYSTIMESTAMP NOT NULL
);
